from django.http import HttpResponse
from django.shortcuts import render

from .forms.analyse import SampleSubmission
from .forms.search import SampleSearch


def index(request):
    return render(request, 'engine/index.html')


def search(request):
    if request.method == 'POST':
        form = SampleSearch(request.POST)
        if form.is_valid():
            print form.cleaned_data
        else:
            print form.errors
        context = {'form_title': 'Sample Search', 'form': form}
        return render(request, 'engine/search.html', context)
    else:
        form = SampleSearch()
        context = {'form_title': 'Sample Search', 'form': form}
        return render(request, "engine/search.html", context)


def analyse(request):
    if request.method == 'POST':
        form = SampleSubmission(request.POST, request.FILES)
        if form.is_valid():
            print form.cleaned_data
        else:
            print form.errors
        # allows to reference form in html template
        context = {'form_title': 'Sample Submission', 'form': form}
        return render(request, 'engine/analyse.html', context)
    else:
        form = SampleSubmission()
        context = {'form_title': 'Sample Submission', 'form': form}
        return render(request, 'engine/analyse.html', context)


def sampleDetail(request):
    return HttpResponse("Detailed sample data")
